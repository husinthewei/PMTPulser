* /Users/weiwei/Documents/Github/PMTPulser/ltspice/SelfContained_Pulser_Divider.asc
XU2 Vcc N010 N014 Bfu730f
R4 N001 N003 80
R9 N023 N025 1k
L1 N009 N025 1n
V2 Vcc 0 5
Cs1 N003 0 {Cs}
C1 TstPls N003 40p
R3 TstPls N007 50
R5 N006 TstPls 100
R6 Vcc Out_1 {p_ef}
XU1 0 N006 Out_1 HFAPNP
Voffs N007 0 1
R7 N016 TSTPls 100
R10 Vcc Out_5 {p_ef}
XU3 0 N016 Out_5 HFAPNP
R11 N004 TSTPls 100
R12 Vcc Out_2 {p_ef}
XU4 0 N004 Out_2 HFAPNP
R13 N018 TSTPls 100
R14 Vcc Out_6 {p_ef}
XU5 0 N018 Out_6 HFAPNP
R15 N005 TSTPls 100
R16 Vcc Out_3 {p_ef}
XU6 0 N005 Out_3 HFAPNP
R17 N019 TSTPls 100
R18 Vcc Out_7 {p_ef}
XU7 0 N019 Out_7 HFAPNP
R19 N002 TSTPls 100
R20 Vcc Out_4 {p_ef}
XU8 0 N002 Out_4 HFAPNP
R21 N017 TSTPls 100
R22 Vcc Out_8 {p_ef}
XU9 0 N017 Out_8 HFAPNP
R23 PMT_1 0 50
R24 PMT_2 0 50
R25 PMT_3 0 50
R26 PMT_4 0 50
R27 PMT_5 0 50
R28 PMT_6 0 50
R29 PMT_7 0 50
R30 PMT_8 0 50
CPMT_1 Out_1 PMT_1 .1µ
CPMT_2 Out_2 PMT_2 .1µ
CPMT_3 Out_3 PMT_3 .1µ
CPMT_4 Out_4 PMT_4 .1µ
CPMT_5 Out_5 PMT_5 .1µ
CPMT_6 Out_6 PMT_6 .1µ
CPMT_7 Out_7 PMT_7 .1µ
CPMT_8 Out_8 PMT_8 .1µ
Cs2 N009 0 {Cs}
Cs3 TSTPls 0 {Cs}
Cs4 TSTPls 0 {Cs}
Cseveral N001 0 2.2µF
Rseries N001 Vcc 3
R33 N009 N008 100
XU10 N011 N013 N015 Bfu730f
R34 N023 N024 1k
R36 N003 N011 1
C4 N012 0 {Cs}
R31 N024 N022 100
L2 N021 N026 20µ
R40 N014 N021 20
R41 N015 N021 20
L3 N012 N024 1n
XU12 N031 N027 Vcc 0 N028 NC_01 LTC2050
R39 N029 N028 111
V5 N030 0 {setcur}
R42 N027 0 33
C3 N027 N028 2p
R43 N031 N030 1.8k
R44 N031 0 200
XU11 N026 N029 N027 BFR182
XX1 N020 N008 N022 Vcc 0 lvds_drive
V1 N020 0 PULSE(0 3 5n 15n 15n 100n)
R1 N010 N009 200
R2 N012 N013 200
Rtrm N008 N022 150
R8 N023 0 1k
R32 Vcc N023 750

* block symbol definitions
.subckt lvds_drive IN - + V+ V-
R1 A IN 10k
R3 N001 N002 2k
R5 + N001 2k
R6 - N001 2k
V2 N002 V- 1.2
R2 A V- 10k
R4 A V+ 10k
I2 + - {iset}
R7 B V- 10k
R8 B V+ 10k
B1 + - I=-2*{iset}*(V(a)>V(b))
C1 B 0 1p
.param iset = 3mA
.ends lvds_drive

.inc BFU730F.PRM
.tran 0 30n 0
.inc BAS70.prm
.param     Cs =1p
.inc HFAPNP.sub
* Jumper  Out_n    to  enable output selection
* HFA3128  comes in arrays of  5 transistors each
* CSn   = Cstray n
* .step param  Iref  1m 20m
.param p_ef = 250
.step param setcur  1 4 .5
* These are the  cables to the  board under test.  The  50 ohm loads are not on the pulser board
.inc bfr182.sub
.param setcur 2
.lib LTC.lib
.backanno
.end
