Version 4
SHEET 1 1212 680
WIRE 544 -160 480 -160
WIRE 752 -160 544 -160
WIRE 864 -160 752 -160
WIRE 208 -96 208 -112
WIRE -48 -80 -48 -112
WIRE 544 -80 544 -160
WIRE 752 -80 752 -160
WIRE 400 16 400 -160
WIRE 544 16 544 0
WIRE 544 16 480 16
WIRE 752 16 752 0
WIRE 752 16 544 16
WIRE 864 16 752 16
WIRE 160 48 112 48
WIRE 208 48 208 -16
WIRE 208 48 160 48
WIRE 304 48 208 48
WIRE -272 64 -320 64
WIRE -112 64 -192 64
WIRE -48 64 -48 0
WIRE -48 64 -112 64
WIRE 400 80 400 16
WIRE -48 112 -48 64
WIRE 208 112 208 48
WIRE 304 160 304 112
WIRE 400 192 400 160
WIRE -48 224 -48 192
WIRE 208 224 208 192
WIRE 400 304 400 272
FLAG -320 64 IN
IOPIN -320 64 In
FLAG 400 304 V-
FLAG -48 224 V-
FLAG -48 -112 V+
FLAG 208 224 V-
FLAG 208 -112 V+
FLAG -112 64 A
FLAG 160 48 B
FLAG 864 -160 +
FLAG 864 16 -
FLAG 304 160 0
SYMBOL res -176 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 384 64 R0
SYMATTR InstName R3
SYMATTR Value 2k
SYMBOL res 496 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 2k
SYMBOL res 496 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL voltage 400 176 R0
SYMATTR InstName V2
SYMATTR Value 1.2
SYMBOL res -64 96 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -32 16 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL current 544 -80 R0
SYMATTR InstName I2
SYMATTR Value {iset}
SYMBOL res 192 96 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 224 0 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL bi 752 -80 R0
WINDOW 3 -53 142 Left 2
SYMATTR Value I=-2*{iset}*(V(a)>V(b))
SYMATTR InstName B1
SYMBOL cap 288 48 R0
SYMATTR InstName C1
SYMATTR Value 1p
TEXT 504 168 Left 2 !.param iset = 3mA
TEXT 816 -72 Left 2 ;Output
